<!DOCTYPE html>
<html>
<head>
  <title>Angular Mighty Picker by Monterail</title>
  <script type="text/javascript" src="../bower_components/angular/angular.js"></script>
  <script type="text/javascript" src="../bower_components/moment/min/moment.min.js"></script>
  <script type="text/javascript" src="../bower_components/moment-range/dist/moment-range.js"></script>
  <script type="text/javascript" src="../build/angular-mighty-datepicker.js"></script>
  <script type="text/javascript">
    angular.module("testapp", ["mightyDatepicker"]);
    angular.module("testapp").controller("TestCtrl", function($scope){
      $scope.range = moment().range("2012-11-05", "2013-01-25")

      $scope.change = function(){
        $scope.range2 = moment().range("2012-11-15", "2012-12-25")
      }

      $scope.markers = [
        {
          day: moment(),
          marker: "tutoti"
        },
        {
          day: moment().add(2, 'day'),
          marker: "tutotite"
        }
      ]


      _callthis = function(day) {
        console.log("call this: ", day);
      }

      _filter = function (day) {
        w = day.weekday();
        return w < 6 && w > 0;
      }

      var template="";
	  template += "<div class=\"mighty-picker__wrapper\">";
	  template += "    <button type=\"button\" class=\"mighty-picker__prev-month\" ng-click=\"moveMonth(-1)\">";
	  template += "    << <\/button>";
	  template += "    <div class=\"mighty-picker__month\" ng-repeat=\"month in months track by $index\">";
	  template += "        <div class=\"mighty-picker__month-name\" ng-bind=\"::month.name\"><\/div>";
	  template += "        <table class=\"mighty-picker-calendar\">";
	  template += "            <tr class=\"mighty-picker-calendar__days\">";
	  template += "                <th ng-repeat=\"day in ::month.weeks[1]\" class=\"mighty-picker-calendar__weekday\" ng-bind=\"::day.date.format('dd')\">";
	  template += "                <\/th>";
	  template += "            <\/tr>";
	  template += "            <tr ng-repeat=\"week in month.weeks\">";
	  template += "                <td ng-class='::{";
	  template += "                  \"mighty-picker-calendar__day\": day,";
	  template += "                  \"mighty-picker-calendar__day--selected\": day.selected,";
	  template += "                  \"mighty-picker-calendar__day--disabled\": day.disabled,";
	  template += "                  \"mighty-picker-calendar__day--in-range\": day.inRange,";
	  template += "                  \"mighty-picker-calendar__day--marked\": day.marker";
	  template += "                }' ng-repeat=\"day in ::week track by $index\" ng-click=\"select(day)\">";
	  template += "                    <div class=\"mighty-picker-calendar__day-wrapper\" ng-bind=\"::day.date.date()\"><\/div>";
	  template += "                    <div class=\"mighty-picker-calendar__day-marker-wrapper\">";
	  template += "                        <div class=\"mighty-picker-calendar__day-marker\" ng-if=\"::day.marker\">";
	  template += "                        <\/div>";
	  template += "                    <\/div>";
	  template += "                <\/td>";
	  template += "            <\/tr>";
	  template += "        <\/table>";
	  template += "    <\/div>";
	  template += "    <button type=\"button\" class=\"mighty-picker__next-month\" ng-click=\"moveMonth(1)\">>></button>";
	  template += "<\/div>";
	  
      $scope.date = null;
      $scope.multi = [moment(), moment().add(2, 'day'), moment().add(5, 'day')];
      $scope.mark = moment();
      $scope.options = {months: 1, after: moment(), template: template};
      $scope.optionsM = {start: moment().add(-1, 'month'), months: 3, mode: "multiple", callback: _callthis, filter: _filter};
      $scope.optionsMAfter = moment().add(-1, 'month');
      $scope.optionsK = {months: 1};

      $scope.dateSt = moment();
      $scope.optionsSt = {};


      $scope.dateDbA = moment();
      $scope.optionsDbA = {};
      $scope.dateDbB =  moment().add(2, 'day');
      $scope.optionsDbB = {};

      $scope.addMarker = function() {
        $scope.markers.push({day: $scope.mark, marker: 'new marker'});
      }

    });
  </script>
  <link rel="stylesheet" type="text/css" href="../build/angular-mighty-datepicker.css"/>
  <style type="text/css">
    * {
      font-size: 10px;
      font-family: Corbel, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "DejaVu Sans", "Bitstream Vera Sans", "Liberation Sans", Verdana, "Verdana Ref", sans-serif;
    }
  </style>
</head>
<body ng-app="testapp">
  <div ng-controller="TestCtrl">
    <div>
      <h1>Simple date picker</h1>
      <mighty-datepicker ng-model="date" options="options"></mighty-datepicker>
      <mighty-datepicker ng-model="date" options="options"></mighty-datepicker>
      <pre>
        {{date | json}}
      </pre>
    </div>
    <div>
      <h1>Multiple date picker</h1>
      <mighty-datepicker ng-model="multi" options="optionsM"></mighty-datepicker>
    </div>
      <pre ng-repeat="day in multi">
        {{ day | json}}
      </pre>
    <div>
      <h1>Date picker with markers</h1>
      <mighty-datepicker ng-model="mark" options="optionsK" markers="markers"></mighty-datepicker>
      <button ng-click="addMarker()">Add marker on selected day</button>
    </div>
    <div>
      <h1>Date picker with date and no start</h1>
      <mighty-datepicker ng-model="dateSt" options="optionsSt"></mighty-datepicker>
      <span>{{ dateSt }}}</span>
    </div>
    <div>
      <h1>Double datepicker for data range</h1>
      <mighty-datepicker ng-model="dateDbA" options="optionsDbA" before="dateDbB" range-from="true" style="display: inline-block"></mighty-datepicker>
      <mighty-datepicker ng-model="dateDbB" options="optionsDbB" after="dateDbA" range-to="true" style="display: inline-block"></mighty-datepicker>
    </div>
  </div>
</body>
</html>
